Index: test/ch/epfl/rigel/gui/SkyCanvasPainterTest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package ch.epfl.rigel.gui;\r\n\r\nimport ch.epfl.rigel.astronomy.AsterismLoader;\r\nimport ch.epfl.rigel.astronomy.HygDatabaseLoader;\r\nimport ch.epfl.rigel.astronomy.ObservedSky;\r\nimport ch.epfl.rigel.astronomy.StarCatalogue;\r\nimport ch.epfl.rigel.coordinates.GeographicCoordinates;\r\nimport ch.epfl.rigel.coordinates.HorizontalCoordinates;\r\nimport ch.epfl.rigel.coordinates.StereographicProjection;\r\nimport javafx.application.Application;\r\nimport javafx.application.Platform;\r\nimport javafx.embed.swing.SwingFXUtils;\r\nimport javafx.scene.canvas.Canvas;\r\nimport javafx.scene.image.WritableImage;\r\nimport javafx.scene.transform.Transform;\r\nimport javafx.stage.Stage;\r\n\r\nimport javax.imageio.ImageIO;\r\nimport java.awt.image.BufferedImage;\r\nimport java.io.File;\r\nimport java.io.InputStream;\r\nimport java.time.ZonedDateTime;\r\n\r\npublic final class SkyCanvasPainterTest extends Application {\r\n    public static void main(String[] args) { launch(args); }\r\n\r\n    private InputStream resourceStream(String resourceName) {\r\n        return getClass().getResourceAsStream(resourceName);\r\n    }\r\n\r\n    StarCatalogue.Builder builder = new StarCatalogue.Builder();\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        try (InputStream hs = resourceStream(\"/hygdata_v3.csv\")) {\r\n            builder = builder.loadFrom(hs, HygDatabaseLoader.INSTANCE);\r\n        }\r\n        try (InputStream as = resourceStream(\"/asterisms.txt\")) {\r\n            StarCatalogue catalogue = builder\r\n                    .loadFrom(as, AsterismLoader.INSTANCE)\r\n                    .build();\r\n\r\n\r\n            long time0 = 0;\r\n            long timeAvg = 0;\r\n\r\n            ZonedDateTime when =\r\n                    ZonedDateTime.parse(\"2020-02-17T20:15:00+01:00\");\r\n            GeographicCoordinates where =\r\n                    GeographicCoordinates.ofDeg(6.57, 46.52);\r\n            HorizontalCoordinates projCenter =\r\n                    HorizontalCoordinates.ofDeg(277, -23);\r\n            StereographicProjection projection =\r\n                    new StereographicProjection(projCenter);\r\n            ObservedSky sky =\r\n                    new ObservedSky(when, where, projection, catalogue);\r\n\r\n            Canvas canvas =\r\n                    new Canvas(800, 600);\r\n            Transform planeToCanvas =\r\n                    Transform.affine(1300, 0, 0, -1300, 400, 300);\r\n            SkyCanvasPainter painter =\r\n                    new SkyCanvasPainter(canvas);\r\n\r\n            time0 = System.nanoTime();\r\n\r\n            painter.clear();\r\n            painter.drawAsterism(sky, planeToCanvas);\r\n            painter.drawStars(sky, projection, planeToCanvas);\r\n            painter.drawPlanets(sky, projection, planeToCanvas);\r\n            painter.drawSun(sky, projection, planeToCanvas);\r\n            painter.drawMoon(sky, projection, planeToCanvas);\r\n            painter.drawHorizon(projection, planeToCanvas);\r\n\r\n            timeAvg = System.nanoTime() - time0;\r\n\r\n            System.out.println((timeAvg / 1000000d)+\" in milliseconds\"); //PERFORMANCE BENCH\r\n\r\n            WritableImage fxImage =\r\n                    canvas.snapshot(null, null);\r\n            BufferedImage swingImage =\r\n                    SwingFXUtils.fromFXImage(fxImage, null);\r\n            ImageIO.write(swingImage, \"png\", new File(\"sky.png\"));\r\n        }\r\n        Platform.exit();\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- test/ch/epfl/rigel/gui/SkyCanvasPainterTest.java	(revision bbdfdc3fd5b4e1794dbd836b2aae912c6c3681e6)
+++ test/ch/epfl/rigel/gui/SkyCanvasPainterTest.java	(date 1587637381808)
@@ -65,7 +65,6 @@
             time0 = System.nanoTime();
 
             painter.clear();
-            painter.drawAsterism(sky, planeToCanvas);
             painter.drawStars(sky, projection, planeToCanvas);
             painter.drawPlanets(sky, projection, planeToCanvas);
             painter.drawSun(sky, projection, planeToCanvas);
